(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{Dr2h:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("2Vo4"),o=n("HDdC"),s=n("DH7j"),a=n("n6bG"),r=n("lJxs"),c=n("vkgz"),p=n("Eixg"),l=n("fXoL"),d=n("KP+k");const h="hinatastepsform";let u=(()=>{class t{constructor(t){this.snackbarService=t,this.appointment={},this.stepIndexSubject=new i.a(1),this.activeStepIndex$=this.stepIndexSubject.asObservable(),function t(e,n,i,c){return Object(a.a)(i)&&(c=i,i=void 0),c?t(e,n,i).pipe(Object(r.a)(t=>Object(s.a)(t)?c(...t):c(t))):new o.a(t=>{!function t(e,n,i,o,s){let a;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){const t=e;e.addEventListener(n,i,s),a=()=>t.removeEventListener(n,i,s)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){const t=e;e.on(n,i),a=()=>t.off(n,i)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){const t=e;e.addListener(n,i),a=()=>t.removeListener(n,i)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let a=0,r=e.length;a<r;a++)t(e[a],n,i,o,s)}o.add(a)}(e,n,(function(e){t.next(arguments.length>1?Array.prototype.slice.call(arguments):e)}),t,i)})}(window,"beforeunload").pipe(Object(c.a)(()=>this.saveAppointmentState())).subscribe(),this.getState(),this.forwardSteps()}get appointmentSteps(){return[{title:"Where",route:p.a[p.a.WHERE].toLowerCase()},{title:"When",route:p.a[p.a.WHEN].toLowerCase()},{title:"Details",route:p.a[p.a.DETAILS].toLowerCase()},{title:"Done",route:p.a[p.a.DONE].toLowerCase()}]}saveStepStore(t){console.log("save step "+p.a[p.a.WHERE]),this.appointment.where=t,this.stepIndexSubject.next(2)}get canShowStepWhen(){return!!this.appointment.where}saveStepSchedule(t){console.log("save step "+p.a[p.a.WHEN]),this.appointment.when=t,this.stepIndexSubject.next(3)}get canShowStepDetails(){return!!this.appointment.when}saveStepCustomer(t){console.log("save step "+p.a[p.a.DETAILS]),this.appointment.details=t,this.stepIndexSubject.next(4)}get canShowStepDone(){return!!this.appointment.where&&!!this.appointment.when&&!!this.appointment.details}deleteAppointmentState(){this.appointment=null,window.sessionStorage.removeItem(h)}saveAppointmentState(){this.appointment&&(console.log("save state"),window.sessionStorage.setItem(h,JSON.stringify(this.appointment)))}getState(){const t=window.sessionStorage.getItem(h);if(t){if(console.log("get saved state"),this.appointment=JSON.parse(t),!this.appointment.when)return;this.appointment.when.date=new Date(this.appointment.when.date),this.appointment.when.range.from=new Date(this.appointment.when.range.from),this.appointment.when.range.to=new Date(this.appointment.when.range.to)}}forwardSteps(){let t=!1;this.canShowStepWhen&&(this.stepIndexSubject.next(2),t=!0),this.canShowStepDetails&&(this.stepIndexSubject.next(3),t=!0),this.canShowStepDone&&(this.stepIndexSubject.next(4),t=!0),t&&this.snackbarService.showSnackbar("Continuing appointment ...")}}return t.\u0275fac=function(e){return new(e||t)(l.Rb(d.a))},t.\u0275prov=l.Eb({token:t,factory:t.\u0275fac}),t})()},Eixg:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=function(t){return t[t.WHERE=0]="WHERE",t[t.WHEN=1]="WHEN",t[t.DETAILS=2]="DETAILS",t[t.DONE=3]="DONE",t}({})},P7zA:function(t,e,n){"use strict";n.r(e),n.d(e,"StepsModule",(function(){return w}));var i=n("ofXK"),o=n("tyNb"),s=n("Eixg"),a=n("fXoL"),r=n("Dr2h");let c=(()=>{class t{constructor(t,e){this.router=t,this.service=e}canLoad(t,e){const n=t.path.toUpperCase();let i=!0;return console.log(`CAN LOAD STEP '${n}'?`),n===s.a[s.a.WHEN].toString()&&(i=this.service.canShowStepWhen),n===s.a[s.a.DETAILS].toString()&&(i=this.service.canShowStepDetails),n===s.a[s.a.DONE].toString()&&(i=this.service.canShowStepDone),i||this.router.navigate([""]),i}}return t.\u0275fac=function(e){return new(e||t)(a.Rb(o.b),a.Rb(r.a))},t.\u0275prov=a.Eb({token:t,factory:t.\u0275fac}),t})();var p=n("vkgz");const l=function(t,e){return{"bg-indigo-600 text-white":t,"text-indigo-600":e}},d=function(t){return{"font-semibold":t}};let h=(()=>{class t{constructor(){this.isDisabled=!0}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Cb({type:t,selectors:[["app-step-button"]],inputs:{isActive:"isActive",isDisabled:"isDisabled",indicator:"indicator",title:"title"},decls:5,vars:10,consts:[[1,"flex","flex-col","items-center","justify-center"],[1,"hover:shadow-lg","cursor-pointer","w-16","h-16","mx-auto","mb-1","rounded-full","shadow-md","border-2","border-indigo-600","flex","items-center","justify-center","text-3xl",3,"disabled","ngClass"],[1,"text-sm","text-indigo-600",3,"ngClass"]],template:function(t,e){1&t&&(a.Nb(0,"div",0),a.Nb(1,"button",1),a.rc(2),a.Mb(),a.Nb(3,"span",2),a.rc(4),a.Mb(),a.Mb()),2&t&&(a.yb(1),a.ec("disabled",e.isDisabled)("ngClass",a.hc(5,l,e.isActive,!e.isActive)),a.yb(1),a.tc(" ",e.indicator," "),a.yb(1),a.ec("ngClass",a.gc(8,d,e.isActive)),a.yb(1),a.sc(e.title))},directives:[i.j],styles:[""]}),t})();function u(t,e){if(1&t){const t=a.Ob();a.Lb(0),a.Nb(1,"app-step-button",8),a.Ub("click",(function(){a.mc(t);const n=e.index;return a.Yb(2).onStepButtonClick(n)})),a.Mb(),a.Kb()}if(2&t){const t=e.$implicit,n=e.index,i=a.Yb().ngIf;a.yb(1),a.ec("isDisabled",i<n+1)("isActive",i>n)("indicator",n+1)("title",t.title)}}function b(t,e){if(1&t&&(a.Lb(0),a.pc(1,u,2,4,"ng-container",7),a.Kb()),2&t){const t=a.Yb();a.yb(1),a.ec("ngForOf",t.steps)}}const f=[{path:"",component:(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.service=n}ngOnInit(){this.steps=this.service.appointmentSteps,this.activeStepIndex$=this.service.activeStepIndex$.pipe(Object(p.a)(t=>this.onStepButtonClick(t-1)))}onStepButtonClick(t){this.router.navigate([this.steps[t].route],{relativeTo:this.route})}}return t.\u0275fac=function(e){return new(e||t)(a.Ib(o.b),a.Ib(o.a),a.Ib(r.a))},t.\u0275cmp=a.Cb({type:t,selectors:[["app-steps"]],decls:12,vars:3,consts:[[1,"md:container","mx-auto","p-4","min-h-full","flex","flex-col"],[1,"z-10","px-8","pt-4","-mx-4","-mt-4","h-32","bg-indigo-600","border-b","border-indigo-600","mb-4"],[1,"text-gray-100","font-light","text-3xl"],[1,"font-semibold","text-6xl"],[1,"h-24","mb-4","grid","grid-cols-4","gap-4"],[4,"ngIf"],[1,"md:p-6","flex","flex-col","border","border-gray-100","shadow-lg","rounded-md","w-full","flex-1","bg-gray-100","p-4"],[4,"ngFor","ngForOf"],[3,"isDisabled","isActive","indicator","title","click"]],template:function(t,e){1&t&&(a.Nb(0,"div",0),a.Nb(1,"header",1),a.Nb(2,"h1",2),a.rc(3," Welcome to "),a.Jb(4,"br"),a.Nb(5,"strong",3),a.rc(6,"Hinata"),a.Mb(),a.Mb(),a.Mb(),a.Nb(7,"div",4),a.pc(8,b,2,1,"ng-container",5),a.Zb(9,"async"),a.Mb(),a.Nb(10,"section",6),a.Jb(11,"router-outlet"),a.Mb(),a.Mb()),2&t&&(a.yb(8),a.ec("ngIf",a.ac(9,1,e.activeStepIndex$)))},directives:[i.l,o.e,i.k,h],pipes:[i.b],styles:[""]}),t})(),children:[{path:s.a[s.a.WHERE].toLowerCase(),loadChildren:()=>n.e(6).then(n.bind(null,"K3ww")).then(t=>t.MapsModule)},{path:s.a[s.a.WHEN].toLowerCase(),loadChildren:()=>Promise.all([n.e(1),n.e(8)]).then(n.bind(null,"sPdk")).then(t=>t.DatesModule),data:{expected:"schedule"},canLoad:[c]},{path:s.a[s.a.DETAILS].toLowerCase(),loadChildren:()=>Promise.all([n.e(1),n.e(9)]).then(n.bind(null,"ED1Q")).then(t=>t.CustomerModule),data:{expected:"customer"},canLoad:[c]},{path:s.a[s.a.DONE].toLowerCase(),loadChildren:()=>n.e(5).then(n.bind(null,"/FU0")).then(t=>t.CompleteModule),data:{expected:["store","schedule","customer"]},canLoad:[c]},{path:"",redirectTo:s.a[s.a.WHERE].toLowerCase()},{path:"**",redirectTo:s.a[s.a.WHERE].toLowerCase()}]},{path:"**",redirectTo:""}];let m=(()=>{class t{}return t.\u0275mod=a.Gb({type:t}),t.\u0275inj=a.Fb({factory:function(e){return new(e||t)},imports:[[o.d.forChild(f)],o.d]}),t})();const g=[c];let w=(()=>{class t{}return t.\u0275mod=a.Gb({type:t}),t.\u0275inj=a.Fb({factory:function(e){return new(e||t)},providers:[r.a,...g],imports:[[i.c,m]]}),t})()}}]);