(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{MVWE:function(e,t,n){e.exports=n.p+"0.185a19015e561485f0e8.worker.js"},"l/x8":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var i=n("3Pt+"),o=n("fXoL"),r=n("Dr2h"),s=n("WwsO"),a=n("TkKc"),c=n("ofXK"),d=n("m3Fj"),l=n("tyNb");function u(e,t){if(1&e){const e=o.Ob();o.Nb(0,"div",10),o.Nb(1,"input",11),o.Ub("click",(function(){o.mc(e);const n=t.$implicit;return o.Yb().onWorkingHourClick(n)})),o.Mb(),o.Nb(2,"label",12),o.rc(3),o.Zb(4,"date"),o.Jb(5,"br"),o.rc(6),o.Zb(7,"date"),o.Mb(),o.Mb()}if(2&e){const e=t.$implicit,n=t.index,i=o.Yb();o.yb(1),o.ec("id",n)("checked",i.isChecked(e.from)),o.yb(1),o.ec("for",n),o.yb(1),o.tc(" ",o.bc(4,5,e.from,"HH:mm")," "),o.yb(3),o.tc(" ",o.bc(7,8,e.to,"HH:mm")," ")}}let b=(()=>{class t{constructor(e,t){this.builder=e,this.service=t,this.appointmentSince=new Date,this.appointmentUntil=new Date,this.workingHours=[],this.workingHoursSteps=45}ngOnInit(){this.buildAppointmentDateLimits(),this.buildScheduleRanges(),this.buildForm(),this.getLastSavedState()}onDateChange(e){this.form.patchValue({range:new Date(e)})}onWorkingHourClick(e){this.form.patchValue({range:e})}onFormComplete(){if(this.form.invalid)return;const e={date:new Date(this.form.get("date").value),range:this.form.get("range").value};this.service.saveStepSchedule(e)}buildScheduleRanges(){const t=this.workingHoursStartHour,n=this.workingHoursEndHour,i=this.workingHoursSteps,o=new Worker(e,void 0);o.onmessage=({data:e})=>{this.workingHours=e.ranges},o.postMessage({from:t,until:n,step:i})}get workingHoursStartHour(){const e=new Date;return e.setHours(8),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}get workingHoursEndHour(){const e=new Date;return e.setHours(18),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}get appointmentSinceString(){return this.appointmentSince.toISOString().split("T")[0]}isChecked(e){const t=this.form.get("range").value;return!!t&&e.getTime()===t.from.getTime()}buildAppointmentDateLimits(){this.appointmentSince.setDate(this.appointmentSince.getDate()+1),this.appointmentUntil.setDate(this.appointmentSince.getDate()+14)}buildForm(){this.form=this.builder.group({date:this.builder.control(this.appointmentSince,[i.i.required]),range:this.builder.control(null,[i.i.required])})}getLastSavedState(){const e=this.service.steps.when;e&&this.form.patchValue({date:e.date,range:e.range})}}return t.\u0275fac=function(e){return new(e||t)(o.Ib(i.b),o.Ib(r.a))},t.\u0275cmp=o.Cb({type:t,selectors:[["app-dates"]],decls:16,vars:12,consts:[[1,"flex-1","flex","flex-col"],[1,"flex-1","h-full","flex","flex-col",3,"formGroup"],[1,"h-16","-mt-3","mb-2"],["name","appointment","label","Reservation date"],["type","date",3,"value","min","max","change"],[1,"overflow-y-auto","h-full","flex-1","md:grid-cols-4","grid","grid-cols-3","gap-4"],["class","flex items-center justify-center",4,"ngFor","ngForOf"],[1,"grid","grid-cols-2","gap-4"],["secondary","true","routerLink","/reserve/where"],[3,"disabled","click"],[1,"flex","items-center","justify-center"],["type","radio",1,"hidden",3,"id","checked","click"],[1,"hover:text-gray-100","focus:text-gray-100","hover:bg-indigo-600","hover:shadow-lg","focus:bg-indigo-600","focus:shadow-lg","w-20","h-12","rounded-full","border-2","border-indigo-600","shadow-md","text-indigo-600","font-semibold","text-sm","flex","flex-col","justify-center","items-center","cursor-pointer",3,"for"]],template:function(e,t){1&e&&(o.Nb(0,"div",0),o.Nb(1,"app-header"),o.rc(2,"Choose the date"),o.Mb(),o.Nb(3,"div",1),o.Nb(4,"div",2),o.Nb(5,"app-input",3),o.Nb(6,"input",4),o.Ub("change",(function(e){return t.onDateChange(e.target.value)})),o.Zb(7,"date"),o.Zb(8,"date"),o.Mb(),o.Mb(),o.Mb(),o.Nb(9,"div",5),o.pc(10,u,8,11,"div",6),o.Mb(),o.Mb(),o.Nb(11,"div",7),o.Nb(12,"app-button",8),o.rc(13,"Back"),o.Mb(),o.Nb(14,"app-button",9),o.Ub("click",(function(){return t.onFormComplete()})),o.rc(15,"Next"),o.Mb(),o.Mb(),o.Mb()),2&e&&(o.yb(3),o.ec("formGroup",t.form),o.yb(3),o.ec("value",t.appointmentSinceString)("min",o.bc(7,6,t.appointmentSince,"yyyy-MM-dd"))("max",o.bc(8,9,t.appointmentUntil,"yyyy-MM-dd")),o.yb(4),o.ec("ngForOf",t.workingHours),o.yb(4),o.ec("disabled",t.form.invalid))},directives:[s.a,i.g,i.d,a.a,c.k,d.a,l.c],pipes:[c.e],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column;flex:1 1 0%}input[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{--bg-opacity:1;background-color:#5a67d8;background-color:rgba(90,103,216,var(--bg-opacity));--text-opacity:1;color:#f7fafc;color:rgba(247,250,252,var(--text-opacity))}"]}),t})()}).call(this,n("MVWE"))},sPdk:function(e,t,n){"use strict";n.r(t),n.d(t,"DatesModule",(function(){return u}));var i=n("ofXK"),o=n("3Pt+"),r=n("t8vf"),s=n("tyNb"),a=n("l/x8"),c=n("fXoL");const d=[{path:"",component:a.a}];let l=(()=>{class e{}return e.\u0275mod=c.Gb({type:e}),e.\u0275inj=c.Fb({factory:function(t){return new(t||e)},imports:[[s.d.forChild(d)],s.d]}),e})(),u=(()=>{class e{}return e.\u0275mod=c.Gb({type:e}),e.\u0275inj=c.Fb({factory:function(t){return new(t||e)},imports:[[i.c,l,r.a,o.h]]}),e})()}}]);